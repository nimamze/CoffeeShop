{% extends 'base.html' %}



  {% block content %}
  
  <div class="container mt-4">
    {% for category in categories %}
    <div class="btn-group">
      <a href="{% url 'category_filter' category.name %}" class="btn btn-outline-danger">{{ category.name }}</a>
      
      {% endfor %}
      
    </div>

    <h1>محصولات</h1>

    <div class="products-container">
      {% for product in products %}
      <a href="{% url 'product_details' product.pk %}" class="no-underline">

        <div class="product-card">
        <h5 class="mb-2">{{ product.name }}</h5>
        <p class="text-muted">قیمت: {{ product.price }} تومان</p>
        {% if product.get_main_image %}
        <img src="{{ product.get_main_image }}" alt="{{ product.name }}" class="product-image">
        {% else %}
        <div class="text-center text-secondary">تصویری موجود نیست</div>
        {% endif %}
        {% if product.availability %}<p>موجود</p>{% else %}<p>ناموجود</p>{% endif %}
        {% if user.is_authenticated %}
        <a href="{% url 'add_to_favorites' product.pk %}">افزودن به علاقه‌مندی‌ها</a>
        {% endif %}
      </div>

      </a>
      {% endfor %}
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
  {% endblock %}
